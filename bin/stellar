#!/usr/bin/env node
'use strict'

// import the package manifest
const pkg = require('../package.json')

// config the command line appearance
require('yargonaut')
  .errorsStyle('red.bold')
  .helpStyle('yellow')
  .style('blue', 'choices')

// load Yargs
const yargs = require('yargs')

// --- define some global configurations ---------------------------------------

// show a welcome message
console.log(`\x1b[34m> Stellar Framework \x1b[37mversion \x1b[33m${pkg.version}\x1b[39m\n`)

// set usage
yargs.usage('Usage: stellar <command> [--options]')

// enable help
yargs.help()
yargs.alias('h', 'help')

// disable show help on fail
yargs.showHelpOnFail(false)

// --- register options --------------------------------------------------------

yargs.option('daemon', {
  describe: 'Execute the command as a daemon',
  type: 'boolean'
})

// --- register commands -------------------------------------------------------

yargs.command(require('./commands/dockerIt.js'))
yargs.command(require('./commands/init.js'))
yargs.command(require('./commands/makeAction'))
yargs.command(require('./commands/makeListener'))
yargs.command(require('./commands/makeModel'))
yargs.command(require('./commands/makeTask'))
yargs.command(require('./commands/run.js'))
yargs.command(require('./commands/startCluster.js'))
yargs.command(require('./commands/test.js'))

// show the menu
yargs.argv
